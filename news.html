<!-- article-card-template.html - قالب کامل مقالات -->
<section class="articles-section">
  <div class="container">
    <!-- Grid مقالات -->
    <div class="articles-grid" id="articles-grid">
      <!-- نمونه کارت -->
      <div class="article-card fadeIn">
        <!-- تصویر مقاله -->
        <img src="IMAGE_URL" alt="TITLE">
        <div class="article-content">
          <!-- تیتر مقاله -->
          <h3>TITLE</h3>
          <!-- تاریخ مقاله -->
          <p class="article-date">DATE</p>
          <!-- خلاصه مقاله -->
          <p class="article-summary">SUMMARY_TEXT</p>
          <!-- لینک ادامه مطلب -->
          <a href="ARTICLE_LINK" class="read-more">ادامه مطلب →</a>
        </div>
      </div>
    </div>

    <!-- دکمه Load More -->
    <div class="load-more-container">
      <button id="load-more" class="btn-primary">مقالات بیشتر</button>
    </div>
  </div>

  <!-- CSS قالب -->
  <style>
    .articles-section {
      background: hsl(0,0%,96%);
      padding: 4rem 1rem;
      font-family:'Vazirmatn','IBM Plex Sans',sans-serif;
      color: hsl(210,100%,20%);
    }
    .container { max-width:1200px; margin:auto; }
    .articles-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:2rem; }

    .article-card {
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(20px);
      border-radius: 1rem;
      overflow:hidden;
      display:flex;
      flex-direction: column;
      box-shadow:0 15px 30px rgba(0,0,0,0.1);
      transition: transform 0.4s, box-shadow 0.4s;
      opacity: 0;
    }
    .article-card.fadeIn { animation: fadeIn 0.8s ease-out forwards; }

    .article-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow:0 20px 40px rgba(0,0,0,0.2);
    }

    .article-card img {
      width:100%;
      height:180px;
      object-fit:cover;
      transition: transform 0.5s;
    }
    .article-card:hover img { transform: scale(1.05); }

    .article-content { padding:1.5rem; display:flex; flex-direction:column; justify-content:space-between; flex:1; }
    .article-content h3 { font-size:1.5rem; font-weight:700; margin-bottom:0.5rem; color:hsl(210,100%,20%); }
    .article-date { font-size:0.9rem; color:hsl(210,30%,40%); margin-bottom:0.75rem; }
    .article-summary { font-size:1rem; line-height:1.6; margin-bottom:1rem; flex-grow:1; }
    .read-more { font-weight:600; color:hsl(27,79%,52%); text-decoration:none; transition: color 0.3s; }
    .read-more:hover { color:hsl(27,79%,58%); text-decoration:underline; }

    .btn-primary {
      background:hsl(27,79%,52%);
      color:hsl(0,0%,98%);
      padding:0.75rem 2rem;
      border-radius:0.75rem;
      border:none;
      font-weight:700;
      cursor:pointer;
      font-size:1.1rem;
      transition: all 0.4s ease;
      margin-top:2rem;
    }
    .btn-primary:hover { background:hsl(27,79%,58%); transform:translateY(-3px) scale(1.05); box-shadow:0 10px 25px rgba(0,0,0,0.2); }

    @keyframes fadeIn { from {opacity:0; transform:translateY(20px);} to {opacity:1; transform:translateY(0);} }

    @media(max-width:768px){
      .article-card img { height:160px; }
      .article-content h3 { font-size:1.3rem; }
      .article-summary { font-size:0.95rem; }
    }
  </style>

  <!-- JS قالب -->
  <script src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
  <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function(){
      const grid = document.getElementById('articles-grid');

      // ساخت Masonry فقط یک بار
      const masonry = new Masonry(grid, {
        itemSelector: '.article-card',
        columnWidth: '.article-card',
        percentPosition: true,
        gutter: 20
      });

      // نمایش کارت‌های اولیه بعد از لود تصاویر
      imagesLoaded(grid, function() { masonry.layout(); });

      // Load More
      const loadBtn = document.getElementById('load-more');
      loadBtn.addEventListener('click', async () => {
        try {
          const res = await fetch('articles.json'); // JSON مقالات
          const articles = await res.json();

          const newCards = articles.map(article => {
            const card = document.createElement('div');
            card.className = 'article-card fadeIn';
            card.innerHTML = `
              <img src="${article.img}" alt="${article.title}">
              <div class="article-content">
                <h3>${article.title}</h3>
                <p class="article-date">${article.date}</p>
                <p class="article-summary">${article.summary}</p>
                <a href="${article.link}" class="read-more">ادامه مطلب →</a>
              </div>`;
            grid.appendChild(card);
            return card;
          });

          imagesLoaded(grid, function() {
            masonry.appended(newCards);
            masonry.layout();
          });

        } catch(err){ console.error(err); }
      });
    });
  </script>
</section>
